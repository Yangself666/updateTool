import{u as I,p as y}from"./user-17fe6185.js";/* empty css                         *//* empty css                     */import{d as f,u as P,o as u,g as h,h as t,A as m,B as d,i as c,w as p,C as S,j as w,x as M,D as T,F as C,G as $,q as N,s as D,_ as g,H as j,l as x,a as E,r as B,I as U,J as V,K as A,p as F,L as R,M as G,N as H,m as O,O as q,e as z,t as J}from"./index-a45fb3eb.js";/* empty css                */const L=l=>(N("data-v-0657a28f"),l=l(),D(),l),K={class:"header-nav flex-space"},Z=L(()=>t("div",{class:"lh"},[t("p",null,"服务器资源上传工具")],-1)),Q={class:"rh flex-start"},W={class:"user-tip"},X={class:"header-info"},Y=L(()=>t("div",{class:"img-info"},[t("div",{class:"user-img"},[t("img",{src:"https://s2.loli.net/2022/04/07/gw1L2Z5sPtS8GIl.gif",alt:"avatar.gif"})]),t("p",{class:"arrow-menu icon-arrow-down"})],-1)),ee=f({__name:"headerNav",setup(l){let r=I();const i=P();function o(){y(r.protocolUrl+"/api/logout",{}).then(n=>{w({message:n.msg,type:"success"}),M(),i.push("/login")}).catch(n=>{M(),i.push("/login"),w(n.msg)})}return(n,b)=>{const v=T,e=C,a=$;return u(),h("div",K,[Z,t("div",Q,[t("p",W,"欢迎"+m(d(r).userInfo.isAdmin?"管理员":"")+m(d(r).userInfo.name)+"登录！",1),t("div",X,[c(a,null,{dropdown:p(()=>[c(e,null,{default:p(()=>[c(v,{onClick:o},{default:p(()=>[S("退出登录")]),_:1})]),_:1})]),default:p(()=>[Y]),_:1})])])])}}});const ae=g(ee,[["__scopeId","data-v-0657a28f"]]),te={key:0,class:"sidebar-container"},oe={class:"side-menu-ul"},se=["onClick"],ne=f({__name:"sideMenu",setup(l){const r=P();j();let i=x.get("userInfo").perm.menuList,o=E([{iconLabel:"UploadFilled",val:1,label:"文件上传",routePath:"/home",activeTab:1,perm_check:"upload"},{iconLabel:"Histogram",val:2,label:"历史记录",routePath:"/historyList",activeTab:2,perm_check:"history"},{iconLabel:"Management",val:3,label:"项目管理",routePath:"/resourceManage",activeTab:3,perm_check:"project",children:[{routePath:"/projectPathManage",val:31},{routePath:"/projectUserManage",val:32},{routePath:"/projectServerManage",val:33}]},{iconLabel:"Platform",val:4,label:"服务器管理",routePath:"/serverManage",activeTab:4,perm_check:"server"},{iconLabel:"Avatar",val:5,label:"用户管理",routePath:"/userManage",activeTab:5,perm_check:"user",children:[{routePath:"/userPermManage",val:51}]},{iconLabel:"Promotion",val:6,label:"权限管理",routePath:"/permissionManage",activeTab:6,perm_check:"permission"}]),n=B(0);function b(e){n.value=e.val,r.push(e.routePath)}function v(e){let a=x.get("userInfo").perm.menuList;for(let s=0;s<e.length;s++)a.indexOf(e[s].perm_check)!==-1&&(e[s].showMenu=!0);return e}return U(()=>r.currentRoute.value.path,e=>{for(let a=0;a<o.length;a++)if(o[a].routePath===e&&(n.value=o[a].val),o[a].children)for(let s=0;s<o[a].children.length;s++)o[a].children[s].routePath===e&&(n.value=o[a].val)},{immediate:!0,deep:!0}),(e,a)=>{const s=z;return d(i)&&d(i).length>0?(u(),h("div",te,[t("ul",oe,[(u(!0),h(V,null,A(v(d(o)),(_,k)=>R((u(),h("li",{class:H(["flex-start",{"active-li":d(n)===_.activeTab}]),key:k,onClick:ue=>b(_)},[c(s,null,{default:p(()=>[(u(),O(q(_.iconLabel)))]),_:2},1024),t("p",null,m(_.label),1)],10,se)),[[G,_.showMenu&&_.showMenu==!0]])),128))])])):F("",!0)}}});const re=g(ne,[["__scopeId","data-v-e5eace6a"]]),ce={class:"index-wrap"},le={class:"main-content"},ie={class:"page-view"},_e=f({__name:"index",setup(l){return(r,i)=>{const o=J("router-view");return u(),h("div",ce,[c(ae),t("div",le,[c(re),t("div",ie,[c(o)])])])}}});const fe=g(_e,[["__scopeId","data-v-3986952e"]]);export{fe as default};
