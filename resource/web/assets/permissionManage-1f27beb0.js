import{u as S,p as F}from"./user-e06f180b.js";/* empty css                        *//* empty css                   *//* empty css                     *//* empty css                    *//* empty css                     *//* empty css               *//* empty css                 */import{d as q,a as P,r as g,P as L,j as c,f as j,E as H,S as $,T as W,V as X,W as G,b as J,c as K,a2 as O,X as Q,g as Z,h as _,i as e,w as l,L as ee,A as s,m as ae,Y as le,o as w,B as u,z as oe,$ as te,a1 as se}from"./index-1f85fb78.js";const ie={class:"main-wrap history-wrap"},re={class:"wrap-title flex-space"},me=_("p",null,"权限管理",-1),ne={class:"search-area"},de={class:"dialog-footer"},Ve=q({__name:"permissionManage",setup(ue){let y=P({table:[]});const h=g();let d=g(!1),b=g(!1),N=g("新增权限"),v=g(!1),a=P({dialogForm:{id:void 0,permissionName:"",menuName:"",permissionPath:""},dialogFormRules:{permissionName:[{required:!0,trigger:"blur",message:"请填写权限名称!"}],menuName:[{required:!0,trigger:"blur",message:"请填写菜单标识!"}],permissionPath:[{required:!0,trigger:"blur",message:"请填写权限路径!"}]},searchData:{id:void 0,permissionName:"",menuName:"",permissionPath:""}});const V=S();L(()=>{f()});function U(){var i;N.value="新增权限",d.value=!0,v.value=!0,(i=h.value)==null||i.clearValidate(),a.dialogForm={id:void 0,permissionName:"",menuName:"",permissionPath:""}}function k(){var r;let i=v.value?"/api/permission/add":"/api/permission/edit",o=v.value?"新增成功！":"修改成功！";(r=h.value)==null||r.validate(n=>{n&&F(V.protocolUrl+i,a.dialogForm).then(m=>{m.code===200?(c({message:o,type:"success"}),d.value=!1,f()):c({message:m.msg})}).catch(m=>{c({message:m})})})}function C(i){N.value="修改权限",v.value=!1,d.value=!0,a.dialogForm=i}function E(){d.value=!1,x()}function x(){var i;(i=h.value)==null||i.clearValidate(),a.dialogForm={id:void 0,permissionName:"",menuName:"",permissionPath:""}}function T(i){se.confirm("确认删除此权限吗?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{F(V.protocolUrl+"/api/permission/del",{id:i}).then(o=>{o.code===200?(c({message:"删除成功",type:"success"}),f()):c({message:o.msg})})}).catch(()=>{})}function f(){b.value=!0,F(V.protocolUrl+"/api/permission/list",{id:Number(a.searchData.id),permissionName:a.searchData.permissionName,menuName:a.searchData.menuName,permissionPath:a.searchData.permissionPath}).then(i=>{i.code===200&&(y.table=i.data),b.value=!1}).catch(i=>{c({message:i.msg}),b.value=!1})}function B(){a.searchData={id:void 0,permissionName:"",menuName:"",permissionPath:""},f()}return(i,o)=>{const r=j,n=H,m=$,z=W,p=X,M=G,D=J,I=K,R=O,A=Q;return w(),Z("div",ie,[_("div",re,[me,e(r,{type:"primary",onClick:U},{default:l(()=>[u("新增")]),_:1})]),_("div",ne,[e(z,{type:"flex",justify:"end",gutter:20},{default:l(()=>[e(m,{span:5},{default:l(()=>[e(n,{modelValue:s(a).searchData.id,"onUpdate:modelValue":o[0]||(o[0]=t=>s(a).searchData.id=t),modelModifiers:{number:!0},placeholder:"权限ID",size:"large",clearable:""},null,8,["modelValue"])]),_:1}),e(m,{span:5},{default:l(()=>[e(n,{modelValue:s(a).searchData.permissionName,"onUpdate:modelValue":o[1]||(o[1]=t=>s(a).searchData.permissionName=t),placeholder:"权限名称",size:"large",clearable:""},null,8,["modelValue"])]),_:1}),e(m,{span:5},{default:l(()=>[e(n,{modelValue:s(a).searchData.permissionPath,"onUpdate:modelValue":o[2]||(o[2]=t=>s(a).searchData.permissionPath=t),placeholder:"权限路径",size:"large",clearable:""},null,8,["modelValue"])]),_:1}),e(m,{span:5},{default:l(()=>[e(n,{modelValue:s(a).searchData.menuName,"onUpdate:modelValue":o[3]||(o[3]=t=>s(a).searchData.menuName=t),placeholder:"菜单标识",size:"large",clearable:""},null,8,["modelValue"])]),_:1}),e(m,{span:4,class:"flex-end"},{default:l(()=>[e(r,{type:"primary",onClick:f},{default:l(()=>[u("搜索")]),_:1}),e(r,{onClick:B,type:"primary",plain:""},{default:l(()=>[u("重置")]),_:1})]),_:1})]),_:1})]),ee((w(),ae(M,{data:s(y).table,style:{width:"100%"},border:""},{default:l(()=>[e(p,{prop:"ID",label:"权限ID",align:"center",width:"90px"}),e(p,{prop:"permissionName",label:"权限名称",align:"center"}),e(p,{prop:"permissionPath",label:"权限路径",align:"center"}),e(p,{prop:"menuName",label:"菜单标识",align:"center"}),e(p,{prop:"UpdatedAt",label:"更新时间",align:"center"},{default:l(t=>[_("span",null,oe(s(te)(t.row.UpdatedAt,"YYYY-MM-DD HH:mm:ss").value),1)]),_:1}),e(p,{label:"操作",align:"center"},{default:l(t=>[e(r,{type:"primary",size:"small",onClick:Y=>C(t.row)},{default:l(()=>[u("修改")]),_:2},1032,["onClick"]),e(r,{type:"primary",size:"small",onClick:Y=>T(t.row.ID)},{default:l(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[A,s(b)]]),e(R,{modelValue:s(d),"onUpdate:modelValue":o[7]||(o[7]=t=>le(d)?d.value=t:d=t),title:s(N),width:"50%"},{footer:l(()=>[_("span",de,[e(r,{onClick:E},{default:l(()=>[u("取消")]),_:1}),e(r,{type:"primary",onClick:k},{default:l(()=>[u("确定")]),_:1})])]),default:l(()=>[e(I,{model:s(a).dialogForm,ref_key:"dialogFormRef",ref:h,"label-position":"right","label-width":"150px",size:"large",rules:s(a).dialogFormRules},{default:l(()=>[e(D,{label:"权限名称",prop:"permissionName"},{default:l(()=>[e(n,{modelValue:s(a).dialogForm.permissionName,"onUpdate:modelValue":o[4]||(o[4]=t=>s(a).dialogForm.permissionName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(D,{label:"权限路径",prop:"permissionPath"},{default:l(()=>[e(n,{modelValue:s(a).dialogForm.permissionPath,"onUpdate:modelValue":o[5]||(o[5]=t=>s(a).dialogForm.permissionPath=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(D,{label:"菜单标识",prop:"menuName"},{default:l(()=>[e(n,{modelValue:s(a).dialogForm.menuName,"onUpdate:modelValue":o[6]||(o[6]=t=>s(a).dialogForm.menuName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{Ve as default};
