import{u as $,p as I}from"./user-26c67f18.js";/* empty css                        *//* empty css                   *//* empty css                     *//* empty css                 *//* empty css                  *//* empty css                     *//* empty css                    */import{d as J,a as D,r as m,P as K,f as O,V as Q,W,E as X,b as G,Q as Z,R as ee,c as ae,a2 as te,X as le,g as b,h as v,z as C,A as a,m as c,w as t,p as _,L as oe,i as l,Y as re,K as se,o as i,a0 as N,B as f,$ as ie,I as ne,J as de,j as h,a1 as pe,_ as ue}from"./index-91c4c1c2.js";const me={class:"main-wrap history-wrap"},ce={class:"wrap-title flex-space"},_e={key:0},fe={key:1},he={class:"dialog-footer"},ge=J({__name:"projectPathManage",setup(be){let S=D({table:[]});const y=se();let F=m(!1);const P=m();let n=m(!1),j=m("新增路径"),g=m(!1),o=D({dialogForm:{projectId:void 0,pathName:"",path:"",hasSubPath:void 0},dialogFormRules:{pathName:[{required:!0,trigger:"blur",message:"请填写项目路径名称!"}],path:[{required:!0,trigger:"blur",message:"请填写项目路径!"}],hasSubPath:[{required:!0,trigger:"blur",message:"请选择是否包含子路径!"}]},selectSubPath:[{label:"包含",val:1},{label:"不包含",val:2}],searchData:{id:void 0,projectName:""}});const V=$();K(()=>{k()});function B(){j.value="新增路径",n.value=!0,g.value=!0,E()}function E(){var s;o.dialogForm={projectId:void 0,pathName:"",path:"",hasSubPath:void 0},(s=P.value)==null||s.clearValidate()}function M(){n.value=!1,E()}function U(){var d;let s=g.value?"/api/project/path/add":"/api/project/path/edit",r=g.value?"新增成功！":"修改成功！";o.dialogForm.projectId=Number(y.query.projectId),(d=P.value)==null||d.validate(p=>{p&&o.dialogForm.projectId&&I(V.protocolUrl+s,o.dialogForm).then(u=>{u.code===200?(h({message:r,type:"success"}),n.value=!1,k()):h({message:u.msg})}).catch(u=>{h({message:u})})})}function k(){F.value=!0,I(V.protocolUrl+"/api/project/path",{id:Number(y.query.projectId)}).then(s=>{s.code===200&&(S.table=s.data),F.value=!1})}function A(s){j.value="修改路径",g.value=!1,n.value=!0,o.dialogForm=s}function R(s){pe.confirm("确认删除此数据吗?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{I(V.protocolUrl+"/api/project/path/del",{id:s}).then(r=>{r.code===200?(h({message:"删除成功",type:"success"}),k()):h({message:r.msg})})}).catch(()=>{})}return(s,r)=>{const d=O,p=Q,u=W,x=X,w=G,T=Z,q=ee,z=ae,L=te,Y=le;return i(),b("div",me,[v("div",ce,[v("p",null,C(a(y).query.projectName)+"-路径管理",1),a(N).ApiProjectPathAddPerm?(i(),c(d,{key:0,type:"primary",onClick:B},{default:t(()=>[f("新增")]),_:1})):_("",!0)]),oe((i(),c(u,{data:a(S).table,style:{width:"100%"},border:""},{default:t(()=>[l(p,{prop:"projectId",label:"项目ID",align:"center"}),l(p,{prop:"pathName",label:"路径名称",align:"center"}),l(p,{prop:"path",label:"路径绝对地址",align:"center"}),l(p,{prop:"hasSubPath",label:"是否包含子路径",align:"center"},{default:t(e=>[e.row.hasSubPath===1?(i(),b("span",_e,"包含")):_("",!0),e.row.hasSubPath===2?(i(),b("span",fe,"不包含")):_("",!0)]),_:1}),l(p,{prop:"serverIdList",label:"更新时间",align:"center"},{default:t(e=>[v("span",null,C(a(ie)(e.row.UpdatedAt,"YYYY-MM-DD HH:mm:ss").value),1)]),_:1}),l(p,{label:"操作",align:"center"},{default:t(e=>[a(N).ApiProjectPathEditPerm?(i(),c(d,{key:0,type:"primary",onClick:H=>A(e.row),size:"small"},{default:t(()=>[f("修改路径")]),_:2},1032,["onClick"])):_("",!0),a(N).ApiProjectPathDelPerm?(i(),c(d,{key:1,type:"primary",onClick:H=>R(e.row.ID),size:"small"},{default:t(()=>[f("删除路径")]),_:2},1032,["onClick"])):_("",!0)]),_:1})]),_:1},8,["data"])),[[Y,a(F)]]),l(L,{modelValue:a(n),"onUpdate:modelValue":r[3]||(r[3]=e=>re(n)?n.value=e:n=e),title:a(j),width:"50%"},{footer:t(()=>[v("span",he,[l(d,{onClick:M},{default:t(()=>[f("取消")]),_:1}),l(d,{type:"primary",onClick:U},{default:t(()=>[f(" 确定 ")]),_:1})])]),default:t(()=>[l(z,{model:a(o).dialogForm,ref_key:"dialogFormRef",ref:P,"label-position":"right","label-width":"150px",size:"large",rules:a(o).dialogFormRules},{default:t(()=>[l(w,{label:"路径名称",prop:"pathName"},{default:t(()=>[l(x,{modelValue:a(o).dialogForm.pathName,"onUpdate:modelValue":r[0]||(r[0]=e=>a(o).dialogForm.pathName=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(w,{label:"路径绝对地址",prop:"path"},{default:t(()=>[l(x,{modelValue:a(o).dialogForm.path,"onUpdate:modelValue":r[1]||(r[1]=e=>a(o).dialogForm.path=e),autocomplete:"off",rows:3,type:"textarea",resize:"none"},null,8,["modelValue"])]),_:1}),l(w,{label:"是否包含子路径",prop:"hasSubPath"},{default:t(()=>[l(q,{modelValue:a(o).dialogForm.hasSubPath,"onUpdate:modelValue":r[2]||(r[2]=e=>a(o).dialogForm.hasSubPath=e),class:"m-2 w100",placeholder:"请选择",clearable:""},{default:t(()=>[(i(!0),b(ne,null,de(a(o).selectSubPath,e=>(i(),c(T,{key:e.val,label:e.label,value:e.val},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});const Ne=ue(ge,[["__scopeId","data-v-ffbd9394"]]);export{Ne as default};
